{namespace vht=Flowpack\Viewhelpertest\ViewHelpers}
<vht:expected regex="true">
~<ul>
\s*	<li>
\s*		<strong>berry:</strong>
\s*		<ul>
\s*			<li>Fruit #0: blackberry</li>
\s*			<li>Fruit #2: cranberry</li>
\s*			<li>Fruit #5: grape</li>
\s*	</ul>
\s*	</li>
\s*	<li>
\s*		<strong>citrus fruit:</strong>
\s*		<ul>
\s*			<li>Fruit #1: orange</li>
\s*			<li>Fruit #4: lemon</li>
\s*		</ul>
\s*	</li>
\s*	<li>
\s*		<strong>core:</strong>
\s*		<ul>
\s*			<li>Fruit #3: pear</li>
\s*			<li>Fruit #6: apple</li>
\s*		</ul>
\s*	</li>
\s*</ul>~
</vht:expected>

<vht:highlight><![CDATA[
<ul>
	<f:groupedFor each="{testVariables.fruits}" as="fruitsOfThisType" groupBy="type" groupKey="fruitType">
		<li>
			<strong>{fruitType}:</strong>
			<ul>
				<f:for each="{fruitsOfThisType}" as="fruit" key="index">
					<li>Fruit #{index}: {fruit.name}</li>
				</f:for>
			</ul>
		</li>
	</f:groupedFor>
</ul>
]]></vht:highlight>


<vht:expected regex="true">
~<ul>
\s*	<li>
\s*		<strong>Ingmar Schlecht:</strong>
\s*		<ol>
\s*			<li>invoice1 \(1980-12-13\)</li>
\s*			<li>invoice3 \(2010-07-04\)</li>
\s*		</ol>
\s*	</li>
\s*	<li>
\s*		<strong>Sebastian Kurf√ºrst:</strong>
\s*		<ol>
\s*			<li>invoice2 \(2010-07-01\)</li>
\s*		</ol>
\s*	</li>
\s*</ul>~
</vht:expected>
<vht:highlight><![CDATA[
<ul>
	<f:groupedFor each="{testVariables.invoices}" as="invoices" groupBy="customer" groupKey="customer">
		<li>
			<strong>{customer.firstName} {customer.lastName}:</strong>
			<ol>
				<f:for each="{invoices}" as="invoice" key="invoiceTitle">
					<li>{invoiceTitle} ({invoice.date -> f:format.date(format: 'Y-m-d')})</li>
				</f:for>
			</ol>
		</li>
	</f:groupedFor>
</ul>
]]></vht:highlight>